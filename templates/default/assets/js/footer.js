var scrollToSelector=function(n){$("html, body").animate({scrollTop:$(n).offset().top+"px"},"fast")};function enableDatePicker(){$(".date-picker").fdatepicker({language:"it",format:"dd/mm/yyyy",weekStart:1})}function set_tabs(){$(window).width()<=640?$(".toggle").each(function(){$(this).find("i.fa-angle-down").switchClass("fa-angle-down","fa-angle-right",10,"linear"),$(this).next(".contentToggle").hide()}):$(".toggle").each(function(){$(this).find("i.fa-angle-right").switchClass("fa-angle-right","fa-angle-down",10,"linear"),$(this).next(".contentToggle").show()})}var homeSlideshow=function(n){n.find(".mainbanner").slick({dots:!1,autoplay:!0,pauseOnHover:!0,speed:300,autoplaySpeed:4e3,infinite:!0})},photoGallery=function(n){},foundationReflow=function(n){setTimeout(function(){$(document).foundation("reflow")},n)},masonryBoxes=function(n){if(640<=$(window).width()){var o=n.find("#masonry");o.length&&o.imagesLoaded(function(){foundationReflow(1e3),$(window).resize(function(){foundationReflow(200)});new Masonry(o[0],{itemSelector:".masonrybox",columnWidth:o[0].querySelector(".grid-sizer")})})}},toggleFormOnlist=function(o){return o.find(".form-onlist-wrapper").hide(),o.find(".for-onlist-toggler").click(function(n){n.preventDefault(),o.find(".form-onlist-wrapper").slideToggle("slow",function(){foundationReflow(0)})})},locationSlideshow=function(n){n.find(".slideshow").slick({dots:!1,autoplay:!0,speed:500,fade:!0,arrows:!1,cssEase:"linear",infinite:!0})},sideTabs=function(n){n.find(".toggle").click(function(){$(this).find("i.fa-angle-right").switchClass("fa-angle-right","fa-angle-down",10,"linear"),$(this).find("i.fa-angle-down").switchClass("fa-angle-down","fa-angle-right",10,"linear"),$(this).next(".contentToggle").toggle(120,"linear",function(){foundationReflow(0)})})},dropcap=function(){var n=$.trim($(this).html()),o=n.substr(0,1);$(this).html('<span class="dropcap">'+o+"</span>"+n.slice(1))},calendarSwitcher=function(o){o.find("header a").on("click",function(n){return $.get($(n.target).attr("href"),function(n){return o.html(n).fadeIn()}),n.preventDefault()}),o.ajaxStart(function(){return o.find("header .calendar-title").addClass("loading"),o.find(".inner").fadeTo(100,.8)})},calendarStyle=function(n){n.find("table .today:not(:has(a))").each(function(n){$(this).wrapInner("<span></span>")})},toTopBehaviour=function(n){$(window).scroll(function(){500<=$(document).scrollTop()?n.show():n.hide()}),n.click(function(){$("html, body").animate({scrollTop:0},800)})},boxCalendarBehaviour=function(n){calendarSwitcher(n),calendarStyle(n)},iterateNavMain=function(o){$(".navMain li > a").each(function(n){o==$(this).attr("href")&&$(this).parentsUntil(".navMain").addClass("active")})};function navMainActive(){var n="/";"/"!=document.location.pathname&&(n=$(".breadcrumb li:nth-child(2) a").attr("href")),iterateNavMain(n)}var alphaLocationsActive=function(n){},page_home=$("body.index.home"),pageSection=$("body.sections.section"),pageLocation=$("body.locations.location"),pageEvent=$("body.events.event"),pageTypologyLocation=$("body.locations.typology_locations"),boxCalendar=$("#main").find(".box_calendar");function sideTabsScrolling(){var n=$(window).scrollTop(),o=$(".headbox").outerHeight();n>=$("#wrapper").offset().top?($("#subnav").stop(),$("#subnav").animate({"margin-top":n-o-155},700,"easeOutBack")):($("#subnav").stop(),$("#subnav").animate({"margin-top":0},700,"easeOutBack"));var a=0;$(".toggle").each(function(){$(this).offset().top<$(window).scrollTop()+40&&a++});var e=$(document).height()-$(window).height();$(window).scrollTop()==e&&(a=$("#subnav a").length-1),$("#subnav a.active").removeClass("active"),$("#subnav a").eq(a).addClass("active")}$(document).ready(function(){$(document).foundation(),enableDatePicker(),navMainActive(),$(".cookiesNotice").find(".confirmation a").click(function(){$(".cookiesNotice").slideUp("slow")}),page_home.length&&(homeSlideshow(page_home),masonryBoxes(page_home)),pageSection.length&&(photoGallery(pageSection),sideTabs(pageSection)),pageLocation.length&&locationSlideshow(pageLocation),pageTypologyLocation.length&&alphaLocationsActive(),pageEvent.length&&photoGallery(pageEvent),boxCalendar.length&&boxCalendarBehaviour(boxCalendar)}),$(window).scroll(function(n){pageLocation.length&&sideTabsScrolling()}),$(function(){$("#subnav a[href*=#]").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var n=$(this.hash);if((n=n.length&&n||$("[name="+this.hash.slice(1)+"]")).length){var o=n.offset().top;return $("html,body").stop(),$("html,body").animate({scrollTop:o},700),!1}}});var n=$("#main").find(".top-form-enabled");n.length&&n.on("click",".bt",function(){scrollToSelector(n)}),$("#main").find("#desc > p:first-of-type").each(dropcap),toTopBehaviour($("#totop"))}),$(document).ajaxComplete(function(){enableDatePicker(),boxCalendarBehaviour(boxCalendar)}),set_tabs(),function(){function a(){if($(window).scrollTop()==$(document).height()-$(window).height()){$(window).off("scroll"),$(".ajaxLoadItems").append('<div class="loader"><i class="fa fa-circle-o-notch fa-spin" style="font-size:24px"></i> Caricamento...</div>'),$(document).foundation();var o=$(".ajaxLoadItems").data("page");$.ajax({url:AJAX_LOAD_ITEMS_ENDPOINT,type:"post",data:{slug:$(".ajaxLoadItems").data("slug"),page:o+1},success:function(n){$(".ajaxLoadItems .loader").remove(),$(document).foundation(),$(".ajaxLoadItems").data("page",o+1),""!=n&&($(".ajaxLoadItems").append(n),$(document).foundation(),$(window).on("scroll",a))}})}}$(document).ready(function(){1==$(".ajaxLoadItems").length&&$(window).on("scroll",a)})}(),function(){var n=function(n,o){o.numberOfInvalids()?$(this).find(".row.error").show():$(this).find(".row.error").hide()},o=function(n,o){$("small.error").hide();for(var a=0;a<o.length;a++)$(o[a].element).closest(".input_wrapper").find("small.error").css({display:"block"})};$("#new_form_onlist").validate({invalidHandler:n,showErrors:o,onfocusout:!1,onkeyup:!1,onclick:!1}),$("#new_form_location_suggest").validate({invalidHandler:n,showErrors:o,onfocusout:!1,onkeyup:!1,onclick:!1}),$("#new_form_party").validate({invalidHandler:n,showErrors:o,onfocusout:!1,onkeyup:!1,onclick:!1}),$("#new_form_contact").validate({invalidHandler:n,showErrors:o,onfocusout:!1,onkeyup:!1,onclick:!1})}();